const VK_API_VERSION = "5.131";
const VK_API_ACCESS_TOKEN = "6f5d85aa6f5d85aa6f5d85aa576f20f0c166f5d6f5d85aa0d883fdb093dedf6973414c3";


const DEVELOP_RESPONSE = {
    "count": 17,
    "items": [
        {
            "id": 766,
            "from_id": 551166716,
            "date": 1654320097,
            "text": "–º–µ–≥–∞ —É–º–Ω–∏–∫",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "attachments": [
                {
                    "type": "photo",
                    "photo": {
                        "album_id": -5,
                        "date": 1654320093,
                        "id": 457247444,
                        "owner_id": 551166716,
                        "access_key": "e9b559cb86b8d81dde",
                        "sizes": [
                            {
                                "height": 105,
                                "type": "m",
                                "width": 130,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=130x105&quality=96&sign=7f3db279b8772acec7a07a4289ddc33c&c_uniq_tag=yPdSDezqzIukeECF6mMRFJ-SEF66aO3Z_qb6rEB2t8U&type=album"
                            },
                            {
                                "height": 105,
                                "type": "o",
                                "width": 130,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=130x105&quality=96&sign=7f3db279b8772acec7a07a4289ddc33c&c_uniq_tag=yPdSDezqzIukeECF6mMRFJ-SEF66aO3Z_qb6rEB2t8U&type=album"
                            },
                            {
                                "height": 162,
                                "type": "p",
                                "width": 200,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=200x162&quality=96&sign=1819d9b83defcadabfbeff5240541a3c&c_uniq_tag=83Jc0Uql3i_sxKnuAoq21QU4FpH-jfiiNN_D3T5Hhyw&type=album"
                            },
                            {
                                "height": 259,
                                "type": "q",
                                "width": 320,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=320x259&quality=96&sign=4aa4dd6524371419aeaf2ad6c1ecc7d1&c_uniq_tag=LZMrf7PPZ1F2wkH8UDxuOuFkvfX-lDrpSKRtaSzEoiw&type=album"
                            },
                            {
                                "height": 354,
                                "type": "r",
                                "width": 437,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=437x354&quality=96&sign=786e04103ea0dc9f070a4494239110d7&c_uniq_tag=RzJDVjkEWoVoyqMAfOCRBpzarGeBPWUQsGdGs8neOuI&type=album"
                            },
                            {
                                "height": 61,
                                "type": "s",
                                "width": 75,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=75x61&quality=96&sign=1c1b1939e3341604f8f9fefe59a67166&c_uniq_tag=xPShqcPgmhkYgLa0i_K9obkHUv7uQPzrQ4gQUEZny9Q&type=album"
                            },
                            {
                                "height": 354,
                                "type": "x",
                                "width": 437,
                                "url": "https://sun9-86.userapi.com/impg/cesYUVur7YWcVpVG6pVr09K2JcnlaxrVvXzHNA/IZm7Ui04DGI.jpg?size=437x354&quality=96&sign=786e04103ea0dc9f070a4494239110d7&c_uniq_tag=RzJDVjkEWoVoyqMAfOCRBpzarGeBPWUQsGdGs8neOuI&type=album"
                            }
                        ],
                        "text": "",
                        "has_tags": false
                    }
                }
            ],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 767,
            "from_id": 485577591,
            "date": 1654325916,
            "text": "–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ, —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã\n—Å—Ç–∞–≤–ª—é –∫–ª–∞—Å—Å",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "attachments": [
                {
                    "type": "photo",
                    "photo": {
                        "album_id": -5,
                        "date": 1654325916,
                        "id": 457271897,
                        "owner_id": 485577591,
                        "access_key": "24855300a0bb79a8b7",
                        "sizes": [
                            {
                                "height": 42,
                                "type": "s",
                                "width": 75,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=75x42&quality=95&sign=93d95f51fb5e626da8847c2aedc1ee63&c_uniq_tag=4MtQ0nsZOHLlOrRT16UP9b_1NNn-7cCesSLhCkVi1kY&type=album"
                            },
                            {
                                "height": 73,
                                "type": "m",
                                "width": 130,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=130x73&quality=95&sign=56d2a393ca35162532a5573b1ce2058d&c_uniq_tag=eJ5urGXyy4YkBN6ZC4ZD7qc6sMy7doZeQyMVh2T8ycU&type=album"
                            },
                            {
                                "height": 340,
                                "type": "x",
                                "width": 604,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=604x340&quality=95&sign=d547263d54480e56f86c440772a8076d&c_uniq_tag=FAFTnITOUnEknFCKjCgOEZgR-kxA4eAkX3yEcqYmiLo&type=album"
                            },
                            {
                                "height": 454,
                                "type": "y",
                                "width": 807,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=807x454&quality=95&sign=f60697778d89caeed70937a046e288e3&c_uniq_tag=_XxElyMw9mU_ek769csCNSpMoctYPN27GHOWby7s3jQ&type=album"
                            },
                            {
                                "height": 720,
                                "type": "z",
                                "width": 1280,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=1280x720&quality=95&sign=6f84be932dbde7b9b9fdf73c35b82015&c_uniq_tag=G5JGxMql0nJoyNwqqvTriGe8NIwzNSZmjyb9vzZNbAY&type=album"
                            },
                            {
                                "height": 900,
                                "type": "w",
                                "width": 1600,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=1600x900&quality=95&sign=38d61027dbfb0d5dafff0d8f2a52b9c2&c_uniq_tag=pbgwXJU7P0tYqJIode-hzxUo5qWO1YiG4AhlGWHxOIg&type=album"
                            },
                            {
                                "height": 87,
                                "type": "o",
                                "width": 130,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=130x87&quality=95&crop=127,0,1345,900&sign=c22a9231fc1968ca8e61144296abf621&c_uniq_tag=1cBrRDDkckzQ9bWK1OK4L0Q2FjHtboPtNtRUg5nCSdM&type=album"
                            },
                            {
                                "height": 133,
                                "type": "p",
                                "width": 200,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=200x133&quality=95&crop=123,0,1353,900&sign=bee55324ff8a25a80ef1dbdf601693b2&c_uniq_tag=xAQUDTA_ZbUC7zh5bJ9tmRbBLH7Hv8UTRg56v5fzAmk&type=album"
                            },
                            {
                                "height": 213,
                                "type": "q",
                                "width": 320,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=320x213&quality=95&crop=124,0,1352,900&sign=2409d3f46c553c9cc4bc788c067a9172&c_uniq_tag=RvcgXQbTmJFdGtATT7P2z8vWpDX-EsusQ6GAUxPltsQ&type=album"
                            },
                            {
                                "height": 340,
                                "type": "r",
                                "width": 510,
                                "url": "https://sun9-74.userapi.com/impg/JnlsJ10UExl7Vsj6zLBvFl7K0K4Zw9c7I6lCfQ/QKlAJ3oe7fE.jpg?size=510x340&quality=95&crop=125,0,1350,900&sign=5603835acae2c714c74be3abab477bf9&c_uniq_tag=UzC0EKQdkVF6dk1_E88tO9cG8uh4F0pGA4g6WssUDmk&type=album"
                            }
                        ],
                        "text": "",
                        "has_tags": false
                    }
                }
            ],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 768,
            "from_id": 364162176,
            "date": 1654328473,
            "text": "–°–¥–µ–ª–∞–ª 6 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç! –£—Ä–æ–≤–µ–Ω—å –∑–Ω–∞–Ω–∏—è —è–∑—ã–∫–∞ —Ö–æ—Ä–æ—à–∏–π. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –≤–æ–ø—Ä–æ—Å—ã, —Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –ø–æ–º–æ–≥–∞–ª –∏—Ö —Ä–µ—à–∏—Ç—å. –í—Å–µ–º —Å–æ–≤–µ—Ç—É—é",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 771,
            "from_id": 143572988,
            "date": 1654371988,
            "text": "–°–¥–µ–ª–∞–ª 5 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, –µ—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –æ—à–∏–±–∫–∏, —Ç–æ –±—ã—Å—Ç—Ä–æ –≤—Å—ë —Ä–µ—à–∞–ª–∏. –ù–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ —Ç–µ–æ—Ä–∏–∏ –æ—Ç –ø—Ä–µ–ø–æ–¥–∞ –ø–æ–º–æ–≥–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å. üëçüèª",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 775,
            "from_id": 669968049,
            "date": 1654511854,
            "text": "–°–ø–∞—Å–∏–±–æ –ú–∞—Ä–∞—Ç—É, –æ—á–µ–Ω—å –ø–æ–º–æ–≥ –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ (–∏ –ø–æ–¥–≥–æ–Ω–∫–µ) –ª–∞–±, —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –ø–æ —Ç–µ–æ—Ä–∏–∏ –ø–æ–º–æ–≥–∞–ª —Ç–æ–∂–µ.",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 779,
            "from_id": 192492502,
            "date": 1656611708,
            "text": "–ú–∞—Ä–∞—Ç –æ—á–µ–Ω—å –∫–ª–∞—Å—Å–Ω—ã–π —á–µ–ª. –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –æ—Ç–ª–∏—á–Ω–∞—è, –æ—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ. –†–∞–±–æ—Ç–∞ –æ—á–µ–Ω—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è, –≤—Å–µ–º —Å–æ–≤–µ—Ç—É—é. –û—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ –æ—Ç–∑—ã–≤—ã, —á—Ç–æ–±—ã –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –ú–∞—Ä–∞—Ç–∞, –∫–∞–∫ –æ—Ç–ª–∏—á–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 782,
            "from_id": 171995306,
            "date": 1666523580,
            "text": "–°–¥–µ–ª–∞–ª –º–Ω–µ –ª–∞–±—É –æ—Ç –∫–æ—Ç–æ—Ä–æ–π –∑–∞–≤–∏—Å–∏–ª–∞ –º–æ—è –∂–∏–∑–Ω—å, –∏ —Ö–æ—Ç—å –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —è –Ω–µ –ø–æ–Ω—è–ª, –¥—É–º–∞—è —á—Ç–æ –º–Ω–µ –∫–∞–∫–æ–π-—Ç–æ –∫–æ—Å—Ç—ã–ª—å –Ω–∞–ø–∏—Å–∞–ª–∏, –æ–∫–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ –∫–æ–¥ –æ—á–µ–Ω—å –¥–∞–∂–µ –º–Ω–æ–≥–æ –∑–∞–¥–∞—á–Ω—ã–π, –Ω–∞ —Å—Ç–æ–ª—å–∫–æ, —á—Ç–æ –ø—Ä–µ–ø–æ–¥ –ø–æ–¥—É–º–∞–ª —Å–Ω–∞—á–∞–ª–∞, —á—Ç–æ —è —á—Ç–æ-—Ç–æ –Ω–µ —Ç–æ —Å–¥–µ–ª–∞–ª. –°–ª–∞–≤–∞ –±–æ–≥—É –ú–∞—Ä–∞—Ç –¥–æ –∫–æ–Ω—Ü–∞ –¥–µ—Ä–∂–∞–ª –º–µ–Ω—è –∑–∞ —Ä—É—á–∫—É –∏ —è –Ω–µ —Å–º–æ—Ç—Ä—è –Ω–∞ –º–æ—é –ø–∞–Ω–∏–∫—É, —Å –ø–æ–º–æ—â—å—é –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ú–∞—Ä–∞—Ç–∞ —Å–º–æ–≥ –ª–æ–≤–∫–æ –ø–∞—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–ø–æ–Ω–∏–º–∞–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–æ–ª—É—á–∏–ª –∑–∞—á—ë—Ç. –í—ã–≤–æ–¥: –£—á–∏—Ç–µ –ø—Ä–æ–≥—É, —Ö–æ—Ç—è –±—ã –Ω–∞ —ç–ª–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–º —É—Ä–æ–≤–Ω–µ, –∞ –∑–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–æ–¥–∞ –Ω–µ –≤–æ–ª–Ω—É–π—Ç–µ—Å—å, –ú–∞—Ä–∞—Ç –≤–µ—Å—å–º–∞ —Ö–æ—Ä–æ—à–æ –æ–± —ç—Ç–æ–º –ø–æ–∑–∞–±–æ—Ç–∏—Ç—Å—è.",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 784,
            "from_id": 270022066,
            "date": 1666524893,
            "text": "",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "attachments": [
                {
                    "type": "photo",
                    "photo": {
                        "album_id": -5,
                        "date": 1666524892,
                        "id": 457267645,
                        "owner_id": 270022066,
                        "access_key": "92d04b5300cd26f699",
                        "sizes": [
                            {
                                "height": 35,
                                "type": "m",
                                "width": 130,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=130x35&quality=96&sign=a0c2a89e9374695b2f587dc9b73a457a&c_uniq_tag=jEHO8v-ZuiVzUl32LCrQmcgabk1oGP6aIF8zPMX2iD4&type=album"
                            },
                            {
                                "height": 87,
                                "type": "o",
                                "width": 130,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=130x87&quality=96&crop=135,0,185,124&sign=85cab4551de52e006f212474d8c95437&c_uniq_tag=7zbUktM29gyblhOoS-mh6D7ldpINOC9sm9FG-eugeTs&type=album"
                            },
                            {
                                "height": 124,
                                "type": "p",
                                "width": 200,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=200x124&quality=96&crop=127,0,200,124&sign=cbf681340796ed9e5cb38033a8c319cc&c_uniq_tag=YWb_CS6D3bki7ty1gUSFCZoG2N1FBi5e6gKecHcrYBo&type=album"
                            },
                            {
                                "height": 124,
                                "type": "q",
                                "width": 320,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=320x124&quality=96&crop=67,0,320,124&sign=aa7db4e759a1d7c71bb0d48cc9efde9b&c_uniq_tag=4y_gPNKufM3eK5O2Rk6mlMnyKXwQp7i9wtvfxiUfIFQ&type=album"
                            },
                            {
                                "height": 124,
                                "type": "r",
                                "width": 455,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=455x124&quality=96&sign=ecb7738fb76dc60bb0fb6c20c2669299&c_uniq_tag=DvAn90mLUNCSUKkRRLBlQm2fbEQNE3_x9sOK48VoRps&type=album"
                            },
                            {
                                "height": 20,
                                "type": "s",
                                "width": 75,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=75x20&quality=96&sign=15dcee23785f768847aa0f0e3bdbc2d6&c_uniq_tag=hXDQe4IDTgHrue_u1XrnMwFiUK-PZg8_ynZmQnUkWcg&type=album"
                            },
                            {
                                "height": 124,
                                "type": "x",
                                "width": 455,
                                "url": "https://sun9-14.userapi.com/impg/T6a3LNSnWW6wBqCPeEz4emEA_OMaTta8k4evnA/xLC_9SCcntU.jpg?size=455x124&quality=96&sign=ecb7738fb76dc60bb0fb6c20c2669299&c_uniq_tag=DvAn90mLUNCSUKkRRLBlQm2fbEQNE3_x9sOK48VoRps&type=album"
                            }
                        ],
                        "text": "",
                        "has_tags": false
                    }
                }
            ],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 785,
            "from_id": 335242778,
            "date": 1666526195,
            "text": "–ú–∞—Ä–∞—Ç –ø–æ–º–æ–≥ 2 —Ä–∞–∑–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—Å—ë –Ω–∞ –≤—ã—Å—à–µ–º —É—Ä–æ–≤–Ω–µ! –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã, –¥–∞–∂–µ —Å —É—á—ë—Ç–æ–º –∫—Ä–∞–π–Ω–µ —Å–∂–∞—Ç—ã—Ö —Å—Ä–æ–∫–æ–≤, –±—ã–ª–∏ –∏–¥–µ–∞–ª—å–Ω—ã–º–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å –∑–∞–ø–∞—Å–æ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –ù–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ú–∞—Ä–∞—Ç –ø–æ–º–æ–≥ —Å —Ä–∞–±–æ—Ç–æ–π –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏ –ø–æ–¥ –∂—ë—Å—Ç–∫–∏–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º. –ê–±—Å–æ–ª—é—Ç–Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è, –±—ã—Å—Ç—Ä–∞—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–æ–º–æ—â—å —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–¥–∞–Ω–∏–µ–º - –∫–æ–º–∏—Å—Å–∏—é —Å–¥–∞–ª –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ. –ü–æ—Å–ª–µ —Å–∞–º–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–∞–∂–µ —Ä–∞—Å—Å–∫–∞–∑–∞–ª, —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –ö—Ä–∞–π–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        },
        {
            "id": 786,
            "from_id": 323710929,
            "date": 1666554345,
            "text": "–°–¥–µ–ª–∞–ª 3 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã—Ö —Ä–∞–±–æ—Ç, –¥–µ—à–µ–≤–æ –±—ã—Å—Ç—Ä–æ –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ. –ù–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã –æ—Ç–≤–µ—á–∞–µ—Ç –∏ —Ä–∞–∑—ä—è—Å–Ω—è–µ—Ç, –≤—Å–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥—É—é  üëå",
            "post_id": 765,
            "owner_id": 270022066,
            "parents_stack": [],
            "thread": {
                "count": 0,
                "items": [],
                "can_post": true,
                "show_reply_button": true,
                "groups_can_post": true
            }
        }
    ],
    "profiles": [
        {
            "id": 143572988,
            "first_name": "–ú–∞–∫—Å–∏–º",
            "last_name": "–ê–∫–∏—à–∏–Ω",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 171995306,
            "first_name": "–ö–∏—Ä–∏–ª–ª",
            "last_name": "–°–µ—Ä–≥–µ–µ–≤",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 192492502,
            "first_name": "–°–µ—Ä–≥–µ–π",
            "last_name": "–ë–∞–±—É—Ä–∏–Ω",
            "can_access_closed": false,
            "is_closed": true
        },
        {
            "id": 270022066,
            "first_name": "–ú–∞—Ä–∞—Ç",
            "last_name": "–§–∞—Ç–∫—É–ª–æ–≤",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 323710929,
            "first_name": "–°–ª–∞–≤–∞",
            "last_name": "–£—Ä—É—Å–æ–≤",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 335242778,
            "first_name": "–ò–≤–∞–Ω",
            "last_name": "–®–∞—Ä–≥–∞–Ω",
            "can_access_closed": false,
            "is_closed": true
        },
        {
            "id": 364162176,
            "first_name": "–ì–µ–æ—Ä–≥–∏–π",
            "last_name": "–ê–Ω—Ç–æ–Ω–æ–≤",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 485577591,
            "first_name": "–ê—Ä—Ç–µ–º–∏–π",
            "last_name": "–ö–ª–∏–º–∞—à–∫–æ",
            "can_access_closed": true,
            "is_closed": false
        },
        {
            "id": 551166716,
            "first_name": "–ï–≤–≥–µ–Ω–∏–π",
            "last_name": "Œö–æ—Ä–Ω–∏–ª–µ–Ω–∫–æ",
            "can_access_closed": false,
            "is_closed": true
        },
        {
            "id": 669968049,
            "first_name": "–ê–Ω–¥—Ä–µ–π",
            "last_name": "–§–∏–ª–∏–ø–ø–æ–≤",
            "can_access_closed": true,
            "is_closed": false
        }
    ],
    "groups": [],
    "current_level_count": 17,
    "can_post": true,
    "show_reply_button": true,
    "groups_can_post": true
};
const DEVELOP_USER = {
    "response": [
        {
            "id": 270022066,
            "crop_photo": {
                "photo": {
                    "album_id": -6,
                    "date": 1670523030,
                    "id": 457267814,
                    "owner_id": 270022066,
                    "sizes": [
                        {
                            "height": 75,
                            "type": "s",
                            "width": 75,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=75x75&quality=95&sign=ae35fb9fd14ce2073035a89b1816dba6&c_uniq_tag=6dapCIfBcuPQ2mfDiizmCemhqxY8M8PCUhB1tcP2QI4&type=album"
                        },
                        {
                            "height": 130,
                            "type": "m",
                            "width": 130,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=130x130&quality=95&sign=f250f82a51934a859795024ff0251ef3&c_uniq_tag=vgJhIkpewkozALK1udDwOJJVT7EQwnUfU97Z7p4Sxis&type=album"
                        },
                        {
                            "height": 604,
                            "type": "x",
                            "width": 604,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=604x604&quality=95&sign=d9d787cf6b557cc941257082c8ec28c6&c_uniq_tag=6u8H-KX05ZOcGqeJ1qsipd-KuSkB4tIsU6jKfrv_T5w&type=album"
                        },
                        {
                            "height": 807,
                            "type": "y",
                            "width": 807,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=807x807&quality=95&sign=c1c361ae520d54d4512f21ef08ee700a&c_uniq_tag=42iTaEyYdK_-i-gxFvMj6ngACI4goL-r4LaFiDX9eWQ&type=album"
                        },
                        {
                            "height": 1280,
                            "type": "z",
                            "width": 1280,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=1280x1280&quality=95&sign=073e6acdeef7b4e609c444b4cd6017c2&c_uniq_tag=YEuD91ChxJn3KI_nCGG9G2_P8RmSczRy7Yr9RM8NqWA&type=album"
                        },
                        {
                            "height": 2560,
                            "type": "w",
                            "width": 2560,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=2560x2560&quality=95&sign=748e1d8aebf72ce8f4f3cbd190d34200&c_uniq_tag=Lj1ReR9HorecoAC4Ob1xEHKkpDHtm1EkE5jkWQzU6NM&type=album"
                        },
                        {
                            "height": 130,
                            "type": "o",
                            "width": 130,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=130x130&quality=95&sign=f250f82a51934a859795024ff0251ef3&c_uniq_tag=vgJhIkpewkozALK1udDwOJJVT7EQwnUfU97Z7p4Sxis&type=album"
                        },
                        {
                            "height": 200,
                            "type": "p",
                            "width": 200,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=200x200&quality=95&sign=8f6a48ab3a2e17175723201c84bfb12b&c_uniq_tag=AmF_eMvjedGSdlZR5LpyuuRbh8j0Yx_katsr-YbUB9c&type=album"
                        },
                        {
                            "height": 320,
                            "type": "q",
                            "width": 320,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=320x320&quality=95&sign=f1da2cb7629764125c1d761e568aea83&c_uniq_tag=Stlt03i2k7y-YXpWe0Ke2NQJoPE8ePXjFlrg5-v6bcI&type=album"
                        },
                        {
                            "height": 510,
                            "type": "r",
                            "width": 510,
                            "url": "https://sun9-17.userapi.com/impg/lTyZRGnUh-tUyzEDBjJaPqo9xt9eJ2WfO_bcnw/G-CE9EmFzmc.jpg?size=510x510&quality=95&sign=fbff69669f54814125fc1d3088e535d4&c_uniq_tag=Ch-uzQX9qdPLsNWGNkbLzAxyIgSI-T4RGMswau2scBI&type=album"
                        }
                    ],
                    "square_crop": "425,0,1900",
                    "text": "",
                    "has_tags": false
                },
                "crop": {
                    "x": 16.6,
                    "y": 0,
                    "x2": 90.82,
                    "y2": 74.22
                },
                "rect": {
                    "x": 0,
                    "y": 0,
                    "x2": 100,
                    "y2": 100
                }
            },
            "first_name": "–ú–∞—Ä–∞—Ç",
            "last_name": "–§–∞—Ç–∫—É–ª–æ–≤",
            "can_access_closed": true,
            "is_closed": false
        }
    ]
}

const comments = {};
const Users = {};
let raw_comments = {};

//https://vk.com/cockyasfxck?w=wall270022066_765
call_method("wall.getComments", {
    owner_id: 270022066,
    post_id: 765,
    extended: true,
}, "prepareComments");


// VK.init({ apiId: 8222059 });
// const response = await getComments(270022066, 765);
// await prepareData(response);
// const comments = await createComments(response);
// await html_render(comments);

function getUserIDs() {
    let result = "";
    for (let i = 0; i < 20; i++) {
        let user = raw_comments.profiles[i];
        if (user)
            result += user.id + ',';
    }

    result = result.slice(0, -1);

    return result;
}

function prepareComments(response) {
    console.log(response);
    raw_comments = response.response;

    call_method("users.get", {
        user_ids: getUserIDs(),
        fields: "photo_400_orig"
    }, "prepareUsers");
}


function prepareUsers(response) {
    console.log(response);

    for (let user of response.response) {
        /*  
        Will be 
        Profiles = {
            1: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω,
            2342: –°–µ—Ä–≥–µ–µ–≤ –°–µ—Ä–≥–µ–π
            ...
            ...
            ...
        }
        */
        Users[user.id] = {
            name: `${user.first_name} ${user.last_name}`,
            photo: getIcon(user)
        };
    }

    html_render(createComments());
}

/**
 * @brief Takes user JSON. Search through each size of photo, search for 'x' size.
 * 
 * @param {JSON} user - response of VK API Users.get method;
 * @returns user photo url of 'x' size;
 */
function getIcon(user) {
    let imgURL = user["photo_400_orig"];
    if (!imgURL) imgURL = "https://my-labs.ru/assets/default_vk_photo.jpg";
    return imgURL;
}

/**
 * @brief get response as input, parse into important data
 * @param {JSON} vk_response VK API walls.getComments response
 * @returns array of comments objects
 */
function createComments() {
    const result_comments = [];

    const items = raw_comments.items;

    for (const comment of items) {
        const result_comment = {};
        /*
          {
              Name: –ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω
              Content: Some very important text...
              AuthorIcon: https://...
          }
        */

        const authorID = comment.from_id;
        const author = Users[authorID];

        result_comment["Name"] = author.name
        result_comment["Content"] = comment.text;
        result_comment["AuthorIcon"] = author.photo;

        if (!result_comment.Content) continue;
        result_comments.push(result_comment);
    }

    return result_comments;
}

function html_render(comments_array) {
    comments_array = shuffle(comments_array);
    const commentsMount = document.querySelector(".comments .mount");
    const template = commentsMount.querySelector(".example_comment");
    for (let comment of comments_array) {
        const newComment = template.content.cloneNode(true);
        newComment.querySelector(".icon").src = comment.AuthorIcon;
        newComment.querySelector(".fio").textContent = comment.Name;
        newComment.querySelector(".comment").textContent = comment.Content;
        commentsMount.append(newComment);
    }
}

function call_method(method, params, cb) {
    const script_element = document.createElement('SCRIPT');
    script_element.src = `https://api.vk.com/method/${method}?${parse_params(params)}&access_token=${VK_API_ACCESS_TOKEN}&v=${VK_API_VERSION}&callback=${cb}`;
    document.getElementsByTagName("head")[0].appendChild(script_element);
}

function parse_params(params) {
    let result = "";

    for (let param in params) {
        result += `${param}=${params[param]}&`;
    }
    result = result.slice(0, -1);

    return result;
}

function shuffle(array) {
    var copy = [], n = array.length, i;

    // While there remain elements to shuffle‚Ä¶
    while (n) {

        // Pick a remaining element‚Ä¶
        i = Math.floor(Math.random() * n--);

        // And move it to the new array.
        copy.push(array.splice(i, 1)[0]);
    }

    return copy;
}
